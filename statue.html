<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SkyBotFactory - Statut du serveur</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #1e1e2f;
    color: #fff;
    margin: 0;
    padding: 0 20px;
}
header, footer {
    text-align: center;
    padding: 15px;
    background: #2b2b40;
}
h1 {
    margin: 10px 0;
}
.container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
}
.card {
    background: #2b2b40;
    flex: 1 1 200px;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.card i {
    font-size: 24px;
    margin-bottom: 10px;
    display: block;
}
#logs {
    background: #2b2b40;
    border-radius: 10px;
    padding: 15px;
    max-height: 250px;
    overflow-y: auto;
    white-space: pre-line;
    font-family: monospace;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
button {
    padding: 12px 30px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    cursor: not-allowed;
    background: #444466;
    color: #fff;
    margin-top: 15px;
}
button:enabled {
    cursor: pointer;
    background: #4caf50;
}
</style>
</head>
<body>

<header>
    <h1>SkyBotFactory - Statut du serveur</h1>
</header>

<div class="container">
    <div class="card">
        <i class="fas fa-server"></i>
        üåê √âtat serveur<br><span id="server-status">‚úÖ Actif</span>
    </div>
    <div class="card">
        <i class="fas fa-users"></i>
        üë§ Utilisateurs<br><span id="user-count">Chargement...</span>
    </div>
    <div class="card">
        <i class="fas fa-key"></i>
        üîë Sessions actives<br><span id="session-count">Chargement...</span>
    </div>
    <div class="card">
        <i class="fas fa-coins"></i>
        üí∞ Cr√©dits distribu√©s<br><span id="credits-count">Chargement...</span>
    </div>
</div>

<h2>Logs r√©cents :</h2>
<div id="logs">‚ùå Impossible de charger les informations du serveur</div>

<div style="text-align:center;">
    <button id="test-btn" disabled>Tester</button>
</div>

<footer>
    ¬© 2026 SkyBotFactory
</footer>

<script>
const API_URL = "https://serveur-site-production-97d2.up.railway.app";

// Charger le statut
async function loadStatus() {
    try {
        const res = await fetch(`${API_URL}/status`);
        const data = await res.json();

        document.getElementById('user-count').innerText = data.userCount || "0";
        document.getElementById('session-count').innerText = data.sessionCount || "0";
        document.getElementById('credits-count').innerText = data.creditsDistributed || "0";

        if (data.logs) {
            document.getElementById('logs').innerText = data.logs.join("\n");
        } else {
            document.getElementById('logs').innerText = "Aucun log r√©cent";
        }

    } catch (err) {
        console.error(err);
        document.getElementById('logs').innerText = "‚ùå Impossible de charger les informations du serveur";
    }
}

// Actualiser toutes les 5 secondes
loadStatus();
setInterval(loadStatus, 5000);
</script>

</body>
</html>

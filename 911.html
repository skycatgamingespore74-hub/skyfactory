<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>R√©seau Aquatique ‚Äì Simulation</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0b1f33;
    color: #9ad7ff;
    transition: background 2s, color 2s;
    overflow: hidden;
}
body.red { background: darkred; color: red; }
#topbar { display: flex; justify-content: space-between; padding: 10px 20px; }
#cart { cursor: pointer; }
#app { padding: 40px; max-width: 800px; margin: auto; position: relative; }
button { padding: 10px 20px; margin-top: 15px; cursor: pointer; }
input { display: block; margin: 10px 0; padding: 8px; width: 100%; }
.popup { position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); background: black; color: white; padding: 10px 20px; }
.countdown { font-size: 32px; margin-top: 20px; }
.trait { position:absolute; background:#9ad7ff; }
.monstre { position:absolute; width:50px; height:50px; }
.fade { animation: fade 1.5s infinite alternate; }
@keyframes fade { 0%{opacity:0.2} 100%{opacity:1} }
</style>
</head>
<body>
<div id="topbar">
  <div>üåä R√©seau Aquatique</div>
  <div id="cart" onclick="showCart()">üß∫ <span id="cartCount">0</span></div>
</div>
<div id="app"></div>

<script>
let cart={}, app=document.getElementById("app");

/* ===== Home ===== */
function home(){
app.innerHTML=`
<h1>Bienvenue</h1>
<p>Site connect√© aux bots. Analyse des flux num√©riques.</p>
<button onclick="login()">Connexion / Inscription</button>`;
}

/* ===== Login ===== */
function login(){
app.innerHTML=`
<h2>Connexion</h2>
<input placeholder="Identifiant">
<input placeholder="Email">
<input type="password" placeholder="Mot de passe">
<button onclick="sync()">Continuer</button>`;
}

/* ===== Synchronisation ===== */
function sync(){
let p=0;
let texts=["Connexion...","Synchronisation...","Chargement du profil..."];
app.innerHTML=`<h2 id="loader">0%</h2>`;
let i=0;
let interval=setInterval(()=>{
    p+=5;
    document.getElementById("loader").innerText=texts[i%3]+" "+p+"%";
    i++;
    if(p>=100){clearInterval(interval); site();}
},100);
}

/* ===== Site Accueil ===== */
function site(){
app.innerHTML=`
<h1>Accueil</h1>
<p> Impossible se charger le site <p> <button onclick="shop()">Boutique</button>`;
}

/* ===== Boutique ===== */
function shop(){
let items=["Module A","Module B","Cl√© X","Acc√®s Y","Donn√©e Z"];
app.innerHTML=`<h2>Boutique</h2>`+items.map(i=>`<button onclick="add('${i}')">${i}</button>`).join("<br>");
}

function add(item){
cart[item]=(cart[item]||0)+1;
updateCart();
popup("Ajout√© au panier");
}

function updateCart(){
document.getElementById("cartCount").innerText=Object.values(cart).reduce((a,b)=>a+b,0);
}

function popup(txt){
let p=document.createElement("div");
p.className="popup";
p.innerText=txt;
document.body.appendChild(p);
setTimeout(()=>p.remove(),1500);
}

/* ===== Panier ===== */
function showCart(){
let html="<h2>Panier</h2>";
for(let i in cart){html+=`${i} x${cart[i]}<br>`}
html+=`<br><button onclick="pay()">Proc√©der au paiement</button>`;
app.innerHTML=html;
}

/* ===== Paiement ===== */
function pay(){
app.innerHTML=`<h2>Paiement</h2><input placeholder="Code joli (4 chiffres)"><button onclick="paid()">Payer</button>`;
}

function paid(){
app.innerHTML=`<h2>‚úî Paiement valid√©</h2>`;
setTimeout(errorPay,2000);
}

/* ===== Erreur Paiement / Disparition ===== */
function errorPay(){
document.body.classList.add("red");
app.innerHTML=`
<h1>Erreur de paiement</h1>
<p>Redirection...</p>`;
setTimeout(disparition,1500);
}

/* ===== Disparition ===== */
function disparition(){
app.innerHTML=`<h1 class="fade">DISPARITION</h1>
<p>
Princesse Naw se porte disparue le 8 f√©vrier √† cause de la reprise lundi.<br>
Son t√©l√©phone a √©t√© retrouv√© au bord d'une route.<br>
√Ä cause d'une √©valuation de Fran√ßais üíÄ
</p>
<a href="tel:9110"><button>üìû APPELER 9110</button></a>
<div class="countdown" id="cd"></div>`;

// Ajouter 40 lignes / traits
for(let i=0;i<40;i++){
let t=document.createElement("div");
t.className="trait";
t.style.top=Math.random()*window.innerHeight+"px";
t.style.left=Math.random()*window.innerWidth+"px";
t.style.width=Math.random()*200+"px";
t.style.height="1px";
document.body.appendChild(t);
}

// Compteur 1 minute
let end=Date.now()+60000;
let cd=document.getElementById("cd");
let timer=setInterval(()=>{
let s=Math.floor((end-Date.now())/1000);
if(s<=0){clearInterval(timer);monstres();}
else cd.innerText=s+"s";
},1000);
}

/* ===== Monstres ===== */
function monstres(){
app.innerHTML=`<h1>SIGNAL PERDU</h1>`;
for(let i=0;i<10;i++){
let m=document.createElement("div");
m.className="monstre";
m.style.top=Math.random()*window.innerHeight+"px";
m.style.left=Math.random()*window.innerWidth+"px";
m.style.background="pink";
document.body.appendChild(m);
}
}

home();
</script>
</body>
</html>

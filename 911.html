<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>R√©seau Aquatique ‚Äì Simulation</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0b1f33;
    color: #9ad7ff;
    transition: background 2s, color 2s;
    overflow: hidden;
}
#topbar { display: flex; justify-content: space-between; padding: 10px 20px; }
#cart { cursor: pointer; }
#app { padding: 40px; max-width: 800px; margin: auto; position: relative; }
button { padding: 10px 20px; margin-top: 15px; cursor: pointer; }
input { display: block; margin: 10px 0; padding: 8px; width: 100%; }
.popup { position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); background: black; color: white; padding: 10px 20px; }
</style>
</head>
<body>
<div id="topbar">
  <div>üåä R√©seau Aquatique</div>
  <div id="cart" onclick="showCart()">üß∫ <span id="cartCount">0</span></div>
</div>
<div id="app"></div>

<script>
let cart={}, app=document.getElementById("app");

/* ===== Home ===== */
function home(){
app.innerHTML=`
<h1>Bienvenue</h1>
<p>Site connect√© aux bots. Analyse des flux num√©riques.</p>
<button onclick="login()">Connexion / Inscription</button>`;
}

/* ===== Login ===== */
function login(){
app.innerHTML=`
<h2>Connexion</h2>
<input placeholder="Identifiant">
<input placeholder="Email">
<input type="password" placeholder="Mot de passe">
<button onclick="sync()">Continuer</button>`;
}

/* ===== Synchronisation ===== */
function sync(){
let p=0;
let texts=["Connexion...","Synchronisation...","Chargement du profil..."];
app.innerHTML=`<h2 id="loader">0%</h2>`;
let i=0;
let interval=setInterval(()=>{
    p+=5;
    document.getElementById("loader").innerText=texts[i%3]+" "+p+"%";
    i++;
    if(p>=100){clearInterval(interval); site();}
},100);
}

/* ===== Site Accueil ===== */
function site(){
app.innerHTML=`
<h1>Accueil</h1>
<p>chargement impossibledu site</p>
<button onclick="shop()">Boutique</button>`;
}

/* ===== Boutique ===== */
function shop(){
let items=["Module A","Module B","Cl√© X","Acc√®s Y","Donn√©e Z"];
app.innerHTML=`<h2>Boutique</h2>`+items.map(i=>`<button onclick="add('${i}')">${i}</button>`).join("<br>");
}

function add(item){
cart[item]=(cart[item]||0)+1;
updateCart();
popup("Ajout√© au panier");
}

function updateCart(){
document.getElementById("cartCount").innerText=Object.values(cart).reduce((a,b)=>a+b,0);
}

function popup(txt){
let p=document.createElement("div");
p.className="popup";
p.innerText=txt;
document.body.appendChild(p);
setTimeout(()=>p.remove(),1500);
}

/* ===== Panier ===== */
function showCart(){
let html="<h2>Panier</h2>";
for(let i in cart){html+=`${i} x${cart[i]}<br>`}
html+=`<br><button onclick="pay()">Proc√©der au paiement</button>`;
app.innerHTML=html;
}

/* ===== Paiement ===== */
function pay(){
app.innerHTML=`<h2>Paiement</h2><input placeholder="Code joli (4 chiffres)"><button onclick="paid()">Payer</button>`;
}

function paid(){
app.innerHTML=`<h2>‚úî Paiement valid√©</h2>`;
setTimeout(redirectErreur,2000);
}

/* ===== Redirection vers erreur.html ===== */
function redirectErreur(){
window.location.href = "erreur.html";
}

home();
</script>
</body>
</html>
